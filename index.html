<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors </title>
</head>
<body>
    <div class="container">
        <div style="padding-bottom: 10px;"> Play Game </div>
        <button id="rock"> Rock</button>
        <button id="paper"> Paper</button>
        <button id="scissors"> Scissors</button>

        <div style="padding-top: 10px;">
            Round Result: <span class="round-result"> </span>
        </div>
        <div style="padding-top: 10px;">
            Score: <span class="score"> 0 - 0 </span>
        </div>
        <div class= "game-result" style="padding-top: 10px;"></div>

    </div>
    <script>
        let playerCounter = 0;
        let computerCounter = 0; 
        function getComputerChoice()
        {
            const randNumber = Math.floor((Math.random() * 3) + 1 );
            console.log(randNumber);
            switch (randNumber)
            {
                case 1: return "rock";
                break;
                case 2: return "paper";
                break;
                case 3: return "scissors";
                break;
                default: return "xdd"; // Not Reachable
            }
        }
        const roundResult = document.querySelector(".round-result");

        function getHumanChoice()
        {
            return prompt("Rock, Paper, or Scissors. What's your choice?").toLowerCase();
        }
        function handleWinRound(playerChoice, computerChoice)
        {
            playerCounter++;
            roundResult.textContent = `You WIN! ${playerChoice} beats ${computerChoice}`;
            console.log(`You WIN! ${playerChoice} beats ${computerChoice}`);
        }
        function handleLoseRound(playerChoice, computerChoice)
        {
            computerCounter++;
            roundResult.textContent = `You Lose  ${computerChoice} beats ${playerChoice}`;

            console.log(`You Lose  ${computerChoice} beats ${playerChoice}`);
        }
        function handleDrawRound(playerChoice, computerChoice)
        {
            roundResult.textContent = `It's a DRAW !!! Both picked ${computerChoice}`;
            
            console.log(`It's a DRAW !!! Both picked ${computerChoice}`);
        }
        const scoreCont = document.querySelector(".score");
        const gameResultsCont = document.querySelector(".game-result");
        let gameOver = false;
        function playRound(humanChoice, computerChoice)
        {
            if(gameOver)
            {
                computerCounter = 0;
                playerCounter = 0;
                scoreCont.textContent = "";
                gameResultsCont.textContent = "";
                roundResult.textContent = "";
                gameOver = false;
            }
            switch(humanChoice)
            {
                case "paper" :
                {
                    if (computerChoice == "rock") handleWinRound(humanChoice, computerChoice);
                    else if (computerChoice == "scissors") handleLoseRound(humanChoice, computerChoice);
                    else handleDrawRound(humanChoice, computerChoice);
                    break;
                }
                case "rock"  :
                if (computerChoice == "scissors") handleWinRound(humanChoice, computerChoice);
                    else if (computerChoice == "paper") handleLoseRound(humanChoice, computerChoice);
                    else handleDrawRound(humanChoice, computerChoice);
                break;
                case "scissors":
                if (computerChoice == "paper") handleWinRound(humanChoice, computerChoice);
                    else if (computerChoice == "rock") handleLoseRound(humanChoice, computerChoice);
                    else handleDrawRound(humanChoice, computerChoice);
                break;
                default : playRound("rock", computerChoice);
                break;
                
            }
            scoreCont.textContent = `${playerCounter} - ${computerCounter}`;
            if(playerCounter >= 5) 
            {
                gameResultsCont.textContent = "YOU WIN!!";
                gameOver = true;
            }
            else if (computerCounter >= 5)
            {
                gameResultsCont.textContent = "you lose :(";
                gameOver = true;
            }
            else
            {
                // do nothing game continues....
            }
        }
        function playGame()
        {
            for (let i = 0; i < 5; i++)
            {
                const humanChoice = getHumanChoice();
                const computerChoice = getComputerChoice(); 
                playRound(humanChoice, computerChoice);
                console.log(computerChoice); 
            }
            if(playerCounter > computerCounter) console.log(`YOU WIN! ${playerCounter} - ${computerCounter} `)
            else if (computerCounter > playerCounter) console.log(`you lose :(  ${playerCounter} - ${computerCounter} `)
            else console.log(`It's a DRAW! ${playerCounter} - ${computerCounter} `)
        }
        const container = document.querySelector(".container");
        container.addEventListener('click', function(event)
        {
            const target = event.target;
            console.log(target.id);
            if(target.id != "")
            {
                const humanChoice = target.id;
                const computerChoice = getComputerChoice();
                playRound(humanChoice, computerChoice);
            }
        });
    </script>

    
    
</body>

</html>